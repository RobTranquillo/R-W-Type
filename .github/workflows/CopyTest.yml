# GitHub Actions Unity CI/CD workflow
#
# Version: 1.0
# License: CC BY 4.0

name: SSH Copy Test
on:
  workflow_dispatch: {}

jobs:
  build:
    name: Copy Test
    runs-on: ubuntu-latest
    steps:
      # Data erzeugen
      - name: Create files
        run: |
          echo "I won't live long" > my_file.txt
          echo "mee too" > my_file2.txt
          echo "same here" > my_file3.txt
          
      - name: write key to file
        run: echo "${{ secrets.DEPLOY_KEY_PRIVATE }}" > keyfile
      
      - name: rsync files
        run: rsync -a -zz -e "ssh -p 22 -i keyfile" Build-WebGL/ ${{ secrets.UBERSPACE_USER }}@${{ secrets.UBERSPACE_HOST }}.uberspace.de:/home/${{ secrets.UBERSPACE_USER }}/html/RW-Type/

      - name Delete keyfile
        run: rm keyfile